document.querySelectorAll("img").forEach(e=>{e.style.cursor="zoom-in",e.addEventListener("click",()=>{const s=document.createElement("div");s.className="zoom-overlay";const n=e.cloneNode();n.style.transformOrigin="center center",n.style.transform="scale(1.0)",n.style.cursor="grab",s.appendChild(n),document.body.appendChild(s),document.body.style.overflow="hidden";let t=1,o=0,i=0,a=!1,r=0,c=0;function l(){n.style.transform=`scale(${t}) translate(${o/t}px, ${i/t}px)`}s.addEventListener("wheel",e=>{e.preventDefault();const a=-e.deltaY,s=.1,n=t;a>0?(t=Math.min(t+s,2),o*=t/n,i*=t/n):(t=Math.max(t-s,.5),o*=t/n,i*=t/n),l()},{passive:!1}),n.addEventListener("mousedown",e=>{e.preventDefault(),a=!0,r=e.clientX,c=e.clientY,n.style.cursor="grabbing"}),window.addEventListener("mousemove",e=>{if(!a)return;o+=e.clientX-r,i+=e.clientY-c,r=e.clientX,c=e.clientY,l()}),window.addEventListener("mouseup",()=>{a=!1,n.style.cursor="grab"});let d=null;n.addEventListener("touchstart",e=>{e.touches.length===1&&(a=!0,r=e.touches[0].clientX,c=e.touches[0].clientY,n.style.cursor="grabbing")}),n.addEventListener("touchmove",e=>{if(a&&e.touches.length===1)e.preventDefault(),o+=e.touches[0].clientX-r,i+=e.touches[0].clientY-c,r=e.touches[0].clientX,c=e.touches[0].clientY,l();else if(e.touches.length===2){e.preventDefault();const n=e.touches[0].clientX-e.touches[1].clientX,s=e.touches[0].clientY-e.touches[1].clientY,a=Math.sqrt(n*n+s*s);if(d!==null){const e=t,n=a-d,s=n*.005;t=Math.min(5,Math.max(.5,t+s)),t<e&&(o*=t/e,i*=t/e),l()}d=a}},{passive:!1}),n.addEventListener("touchend",e=>{e.touches.length===0&&(a=!1,n.style.cursor="grab"),d=null});const u=()=>{s.remove(),document.body.style.overflow=""};s.addEventListener("click",e=>{e.target===s&&u()});function h(e){e.key==="Escape"&&u()}document.addEventListener("keydown",h,{once:!0})})})