document.querySelectorAll("img").forEach(e=>{e.style.cursor="zoom-in",e.addEventListener("click",()=>{const n=document.createElement("div");n.className="zoom-overlay";const s=e.cloneNode();s.style.transformOrigin="center center",s.style.transform="scale(1.0)",s.style.cursor="grab",n.appendChild(s),document.body.appendChild(n),document.body.style.overflow="hidden";let t=1,o=0,i=0,r=!1,c=0,l=0;function d(){s.style.transform=`scale(${t}) translate(${o/t}px, ${i/t}px)`}n.addEventListener("wheel",e=>{e.preventDefault();const a=-e.deltaY,s=.1,n=t;a>0?(t=Math.min(t+s,2),o*=t/n,i*=t/n):(t=Math.max(t-s,.5),o*=t/n,i*=t/n),d()},{passive:!1}),s.addEventListener("mousedown",e=>{e.preventDefault(),r=!0,c=e.clientX,l=e.clientY,s.style.cursor="grabbing"}),window.addEventListener("mousemove",e=>{if(!r)return;o+=e.clientX-c,i+=e.clientY-l,c=e.clientX,l=e.clientY,d()}),window.addEventListener("mouseup",()=>{r=!1,s.style.cursor="grab"});let a=null;n.addEventListener("touchmove",e=>{if(e.touches.length===2){e.preventDefault();const n=e.touches[0].clientX-e.touches[1].clientX,s=e.touches[0].clientY-e.touches[1].clientY,r=Math.sqrt(n*n+s*s);if(a!==null){const e=t,n=r-a,s=n*.005;t=Math.min(5,Math.max(.5,t+s)),t<e&&(o*=t/e,i*=t/e),d()}a=r}},{passive:!1}),n.addEventListener("touchend",()=>{a=null});const u=()=>{n.remove(),document.body.style.overflow=""};n.addEventListener("click",e=>{e.target===n&&u()});function h(e){e.key==="Escape"&&u()}document.addEventListener("keydown",h,{once:!0})})})