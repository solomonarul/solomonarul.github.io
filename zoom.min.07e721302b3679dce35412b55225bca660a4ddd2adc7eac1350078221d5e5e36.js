document.querySelectorAll("img").forEach(e=>{e.style.cursor="zoom-in",e.addEventListener("click",()=>{const s=document.createElement("div");s.className="zoom-overlay";const n=e.cloneNode();n.style.transformOrigin="center center",n.style.transform="scale(1.0)",n.style.cursor="grab",s.appendChild(n),document.body.appendChild(s),document.body.style.overflow="hidden";let t=1,r=0,c=0,o=!1,i=0,a=0;function l(){n.style.transform=`scale(${t}) translate(${r/t}px, ${c/t}px)`}s.addEventListener("wheel",e=>{e.preventDefault();const o=-e.deltaY,n=.1,s=t;o>0?t=Math.min(t+n,2.5):t=Math.max(t-n,.5),r*=t/s,c*=t/s,l()},{passive:!1}),n.addEventListener("mousedown",e=>{e.preventDefault(),o=!0,i=e.clientX,a=e.clientY,n.style.cursor="grabbing"}),window.addEventListener("mousemove",e=>{if(!o)return;r+=e.clientX-i,c+=e.clientY-a,i=e.clientX,a=e.clientY,l()}),window.addEventListener("mouseup",()=>{o=!1,n.style.cursor="grab"});let d=null;n.addEventListener("touchstart",e=>{e.touches.length===1&&(o=!0,i=e.touches[0].clientX,a=e.touches[0].clientY,n.style.cursor="grabbing")}),n.addEventListener("touchmove",e=>{if(o&&e.touches.length===1)e.preventDefault(),r+=e.touches[0].clientX-i,c+=e.touches[0].clientY-a,i=e.touches[0].clientX,a=e.touches[0].clientY,l();else if(e.touches.length===2){e.preventDefault();const n=e.touches[0].clientX-e.touches[1].clientX,s=e.touches[0].clientY-e.touches[1].clientY,i=Math.sqrt(n*n+s*s);if(d!==null){const e=t,n=i-d,s=n*.0075;t=Math.min(5,Math.max(.9,t+s)),r*=t/e,c*=t/e,l()}d=i,o=!1}},{passive:!1}),n.addEventListener("touchend",e=>{e.touches.length===0&&(o=!1,n.style.cursor="grab"),d=null});const u=()=>{s.remove(),document.body.style.overflow=""};s.addEventListener("click",e=>{e.target===s&&u()});function h(e){e.key==="Escape"&&u()}document.addEventListener("keydown",h,{once:!0})})})